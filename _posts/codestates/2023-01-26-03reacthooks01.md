---
layouts: post
title:  "React Hooks Assignment"
categories: JS
tag: [codestates]
toc: true
sidebar:
    nav: "docs"
---

json-server - json íŒŒì¼ì„ ì´ìš©í•˜ì—¬ REST API ì„œë²„ë¥¼ êµ¬ì¶•í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

ì„¤ì¹˜
`npm i -g json-server`

`cd data`<br/>
`json-server --watch data.json --port 3001`

ê¸°ë³¸ í¬íŠ¸ 3000, ì–´ëŠ í¬íŠ¸ì—ì„œ ì„œë²„ë¥¼ ì—´ì§€ ì„¤ì •

ì˜¤ë¥˜ ë°œìƒ

`json-server : C:\Users\choi\AppData\Roaming\npm\json-server.ps1 íŒŒì¼ì„ ë¡œë“œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`

powershell ê´€ë¦¬ìë¡œ ì‹¤í–‰

`executionpolicy` -> `Restricted`

ë¥¼ í’€ì–´ì¤˜ì•¼í•¨

`set-executionpolicy unrestricted`

ê·¼ë° ë‚˜ëŠ” `AllSigned`ë¥¼ ë°˜í™˜ í•˜ì§€ë§Œ ê°™ì€ ë°©ì‹ìœ¼ë¡œ í•´ê²° ê°€ëŠ¥í–ˆìŒ

---

## App.js

react.lazy() & suspense

```js
import { Suspense, lazy } from 'react';
```
```js
const Home = lazy(() => import('./Home'));
const Loading = lazy(() => import('./component/Loading'));
[...]
```
```js
  return (
    <BrowserRouter>
      <Suspense fallback={<Loading/>}>
      [...]
      </Suspense>
    </BrowserRouter>
```

---

## BlogDetail.js

useParams()

ê°œë³„ idë¥¼ ë°›ì•„ì™€ ê°œë³„ ë¸”ë¡œê·¸ì˜ ë‚´ìš©ì´ ë³´ì¼ ìˆ˜ ìˆë„ë¡

```js
import { useParams } from "react-router-dom";
```
```js
const BlogDetails = () => {
  [...]
  const {id} = useParams();
}
```
```js
  useEffect(() => {
    setTimeout(() => {
      fetch(`http://localhost:3001/blogs/${id}`)
      [...]
    })
  })
```

---

useNavigate

delete ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‹¤ì‹œ homeìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

```js
import { useNavigate } from "react-router-dom";
```
```js
const navigate = useNavigate();

const handleDeleteClick = () => {
  fetch(`http://localhost:3001/blogs/${id}`, {
    method: "DELETE",
  })
  .then(() => {
    navigate('/')
  })
  .catch((error) => {
    console.error('Error', error);
  })
```
ë¦¬ë‹¤ì´ë™íŠ¸ë„ ë˜ê³  ì‚­ì œë„ ëœë‹¤. í•˜ì§€ë§Œ í™ˆìœ¼ë¡œ ëŒì•„ì™”ì„ ë•Œ í•œë²ˆ ë” ìƒˆë¡œê³ ì¹¨ì„ í•´ì•¼ í•´ë‹¹ ê¸€ì´ ì—†ì–´ì§ ë”°ë¼ì„œ

```js
  .then(() => {
    window.location.href = '/'
  })
```
ì„ ì‚¬ìš©í•´ì„œ í•´ê²°

---

useState() & ì¡°ê±´ë¶€ ë Œë”ë§

```js
const [isLike, setIsLike] = useState(true);
```
```js
  const handleLikeClick = () => {
    setIsLike(!isLike)
  }
```
```js
  <button onClick={handleLikeClick}>
    { isLike ? "ğŸ¤" : "â¤ï¸" }
  </button>
```

---

- í•˜íŠ¸ë¥¼ ëˆ„ë¥´ë©´ homeì—ì„œ ìƒˆë¡œê³ ì¹¨ì„ í–ˆì„ ë•Œ ìˆ«ìê°€ ë³€í•´ì•¼í•¨

```js
const handleLikeClick = () => {
    setIsLike(!isLike)
    let patchData = {"likes" : blog.likes + 1};

    fetch(`http://localhost:3001/blogs/${id}`, {
      method : "PATCH",
      headers: {"Content-Type" : "Application/json"},
      body: JSON.stringify(patchData)
    })
    .then(() => {
      window.location.href = `/blogs/${id}`;
    })
    .catch((error) => {
      console.error('Error', error);
    })
  }
```

- "Content-Type" : "Application/json"

<https://caileb.tistory.com/192>

---

## CreateBlog.js

ë“±ë¡, homeìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

```js
  const [title, setTitle] = useState('');
  const [body, setBody] = useState('');
  const [author, setAuthor] = useState('ê¹€ì½”ë”©');

  const handleSubmit = (e) => {
    e.preventDefault();
    const data = {title, body, author, like:0}
    fetch(`http://localhost:3001/blogs/`, {
      method : "POST",
      headers: {"Content-Type" : "Application/json"},
      body: JSON.stringify(data)
    })
    .then(() => {
      window.location.href = `/`;
    })
    .catch((error) => {
      console.error('Error', error);
    })

    }
```
```js
  <form onSubmit={handleSubmit}>
    <label>ì œëª©</label>
    <input 
      type="text" 
      required 
      value={title}
      onChange={(e) => setTitle(e.target.value)}        placeholder="ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."
    />
    [...]
```